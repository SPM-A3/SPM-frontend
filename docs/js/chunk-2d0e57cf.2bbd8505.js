(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d0e57cf"],{9563:function(e,t,o){"use strict";o.r(t);var n=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",[[o("a-card",{staticStyle:{width:"240px"},attrs:{hoverable:""},scopedSlots:e._u([{key:"cover",fn:function(){return[o("img",{attrs:{src:e.bookInfo.cover}})]},proxy:!0}])})],[o("a-descriptions",{attrs:{title:"Reservation Info",size:"default",bordered:""}},[o("a-descriptions-item",{attrs:{label:"book name"}},[e._v(e._s(e.bookInfo.book_name))]),o("a-descriptions-item",{attrs:{label:"reservation_id"}},[e._v(e._s(e.reservationDetail.reservation_id))]),o("a-descriptions-item",{attrs:{label:"ISBN"}},[e._v(e._s(e.reservationDetail.ISBN))]),o("a-descriptions-item",{attrs:{label:"reservation_time"}},[e._v(e._s(e.reservationDetail.reservation_time))]),o("a-descriptions-item",{attrs:{label:"status"}},[e._v(e._s(e.reservationDetail.status))])],1)],1===e.reservationDetail.status?o("a-tooltip",{staticClass:"item",attrs:{effect:"dark",size:"small",content:"取消预约",placement:"top"}},[o("a-button",{attrs:{type:"primary",icon:"el-icon-edit"},on:{click:function(t){return e.cancelReservation()}}},[e._v(" 取消预约 ")])],1):e._e(),0===e.reservationDetail.status?o("a-tooltip",{staticClass:"item",attrs:{effect:"dark",size:"small",content:"重新预约",placement:"top"}},[o("a-button",{attrs:{type:"primary",icon:"el-icon-edit"},on:{click:function(t){return e.reReservation()}}},[e._v(" 重新预约 ")])],1):e._e()],2)},s=[],a=(o("d3b7"),{data:function(){return{reservationDetail:[],bookInfo:[],isRouterAlive:!0}},created:function(){this.getReservationDetail(this.$route.params.id)},methods:{getReservationDetail:function(e){console.log(e);var t=this,o=new Headers;o.append("access_token",this.access_token);var n={method:"GET",headers:o},s="https://www.fastmock.site/mock/54449dce8948f02a106d0f454713f04b/spm/api/reservation/detail?reservation_id="+e,a=new Request(s,n);fetch(a).then((function(e){return e.json()})).then((function(e){console.log(e),t.reservationDetail=e})).catch((function(e){return console.log("Request Failed",e)}));var i={method:"GET"},r="https://www.fastmock.site/mock/54449dce8948f02a106d0f454713f04b/spm/api/book/detail?ISBN="+this.reservationDetail.ISBN,c=new Request(r,i);fetch(c).then((function(e){return e.json()})).then((function(e){console.log(e),t.bookInfo=e.book_info}))},cancelReservation:function(){var e=this.reservationDetail.reservation_id;console.log(e);var t=new Headers;t.append("access_token",this.access_token);var o={method:"POST",body:e,headers:t},n=new Request("https://www.fastmock.site/mock/54449dce8948f02a106d0f454713f04b/spm/api/user/reservation/cancel",o);this.reload(),fetch(n).then((function(e){return e.json()})).then((function(e){console.log(e)})).catch((function(e){return console.log("Request Failed",e)}))},reReservation:function(){var e=this.reservationDetail.ISBN;console.log(e);var t=new Headers;t.append("access_token",this.access_token);var o={method:"POST",body:e,headers:t},n=new Request("https://www.fastmock.site/mock/54449dce8948f02a106d0f454713f04b/spm/api/user/reservation/add",o);this.reload(),fetch(n).then((function(e){return e.json()})).then((function(e){console.log(e)})).catch((function(e){return console.log("Request Failed",e)}))},reload:function(){this.isRouterAlive=!1,this.$nextTick((function(){this.isRouterAlive=!0}))}}}),i=a,r=o("2877"),c=Object(r["a"])(i,n,s,!1,null,null,null);t["default"]=c.exports}}]);
//# sourceMappingURL=chunk-2d0e57cf.2bbd8505.js.map
(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-77f3ca2c"],{"039a":function(e,t,r){"use strict";r("7174")},"578a":function(e,t,r){"use strict";r.r(t);var o=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[e._m(0),r("div",{staticClass:"login"},[r("a-form",{attrs:{form:e.form},on:{submit:e.onSubmit}},[r("a-alert",{directives:[{name:"show",rawName:"v-show",value:e.error,expression:"error"}],staticStyle:{"margin-bottom":"24px"},attrs:{type:"error",closable:!0,message:e.error,showIcon:""}}),r("a-form-item",[r("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["account",{rules:[{required:!0,message:"Please input your id",whitespace:!0}]}],expression:"['account', {rules: [{ required: true, message: 'Please input your id', whitespace: true}]}]"}],attrs:{autocomplete:"autocomplete",size:"large",placeholder:"Please input your id"}},[r("a-icon",{attrs:{slot:"prefix",type:"user"},slot:"prefix"})],1)],1),r("a-form-item",[r("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["password",{rules:[{required:!0,message:"Please input your password",whitespace:!0}]}],expression:"['password', {rules: [{ required: true, message: 'Please input your password', whitespace: true}]}]"}],attrs:{size:"large",placeholder:"Please input your password",autocomplete:"autocomplete",type:"password"}},[r("a-icon",{attrs:{slot:"prefix",type:"lock"},slot:"prefix"})],1)],1),r("a-form-item",[r("a-button",{staticStyle:{width:"100%","margin-top":"24px"},attrs:{loading:e.logging,size:"large",htmlType:"submit",type:"primary"}},[e._v("LOGIN")])],1),r("div",[r("router-link",{staticStyle:{float:"right"},attrs:{to:"/register"}},[e._v("REGISTER")]),r("router-link",{staticStyle:{float:"left"},attrs:{to:"/admin/login"}},[e._v("ADMIN LOGIN")])],1)],1)],1)])},s=[function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"top"},[r("div",{staticClass:"desc"},[e._v("SPM A3 Library Management System")])])}],a=r("93d6"),i={name:"Login",data:function(){return{logging:!1,error:"",form:this.$form.createForm(this)}},computed:{},methods:{onSubmit:function(e){var t=this;e.preventDefault(),this.form.validateFields((function(e){if(!e){t.logging=!0;var r=t.form.getFieldValue("account"),o=t.form.getFieldValue("password");Object(a["f"])(r,o).then((function(e){return e.json()})).then(t.afterLogin).catch((function(e){console.log(e)}))}}))},afterLogin:function(e){var t=this;this.logging=!1,this.$store.commit("setRole","user");var r=e,o=r.data,s=r.code,i=r.msg;0==s?(Object(a["i"])(o),Object(a["j"])("user"),this.$message.success("Login successfully, redirecting...",1),console.log("token",Object(a["c"])()),this.$global.IS_LOGIN=!0,setTimeout((function(){t.$router.go("/")}),500)):this.error=i}},created:function(){var e=this;Object(a["l"])().then((function(e){return e.json()})).then((function(t){var r=t.data,o=t.code;t.msg;0!=o&&"0"!=o||(Object(a["k"])(r),e.$router.push("/"))}))}},n=i,c=(r("039a"),r("2877")),u=Object(c["a"])(n,o,s,!1,null,null,null);t["default"]=u.exports},7174:function(e,t,r){}}]);
//# sourceMappingURL=chunk-77f3ca2c.e68bb6a8.js.map
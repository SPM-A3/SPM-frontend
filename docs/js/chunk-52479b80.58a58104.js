(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-52479b80"],{"00b4":function(o,t,e){"use strict";e("ac1f");var r=e("23e7"),n=e("da84"),a=e("c65b"),i=e("e330"),c=e("1626"),s=e("861d"),u=function(){var o=!1,t=/[ac]/;return t.exec=function(){return o=!0,/./.exec.apply(this,arguments)},!0===t.test("abc")&&o}(),f=n.Error,b=i(/./.test);r({target:"RegExp",proto:!0,forced:!u},{test:function(o){var t=this.exec;if(!c(t))return b(this,o);var e=a(t,this,o);if(null!==e&&!s(e))throw new f("RegExp exec method returned something other than an Object or null");return!!e}})},"47fd":function(o,t,e){},"4df4":function(o,t,e){"use strict";var r=e("da84"),n=e("0366"),a=e("c65b"),i=e("7b0b"),c=e("9bdd"),s=e("e95a"),u=e("68ee"),f=e("07fa"),b=e("8418"),l=e("9a1f"),d=e("35a1"),h=r.Array;o.exports=function(o){var t=i(o),e=u(this),r=arguments.length,p=r>1?arguments[1]:void 0,m=void 0!==p;m&&(p=n(p,r>2?arguments[2]:void 0));var v,k,_,g,y,I,w=d(t),S=0;if(!w||this==h&&s(w))for(v=f(t),k=e?new this(v):h(v);v>S;S++)I=m?p(t[S],S):t[S],b(k,S,I);else for(g=l(t,w),y=g.next,k=e?new this:[];!(_=a(y,g)).done;S++)I=m?c(g,p,[_.value,S],!0):_.value,b(k,S,I);return k.length=S,k}},"5fb1":function(o,t,e){"use strict";e.r(t);var r=function(){var o=this,t=o.$createElement,e=o._self._c||t;return e("div",[e("a-card",{attrs:{bordered:!1}},[e("a-col",{attrs:{span:16}},[e("a-row",[e("a-col",{attrs:{span:8}},[e("a-card",{staticStyle:{width:"500px",height:"250px"},attrs:{title:o.bookInfo.book_name,bordered:!1}},[e("p",[o._v("ISBN: "+o._s(o.bookInfo.ISBN))]),e("p",[o._v("Author: "+o._s(o.bookInfo.author))]),e("p",[o._v("Category: "+o._s(o.bookInfo.category))]),e("p",[o._v("Publisher: "+o._s(o.bookInfo.publisher))]),e("p",[o._v("Published Time: "+o._s(o.bookInfo.published_time))])])],1),e("a-col",{attrs:{offset:16}},[e("a-card",{staticStyle:{height:"200px",width:"300px"},attrs:{bordered:!1,size:"small"}},[e("br"),e("br"),e("p",[e("b",[o._v("Available Number: "+o._s(o.avail_book_number))]),o._v("  "),o.avail_book_number/o.book_number>=.5?e("a-tag",{attrs:{color:"green"}},[o._v("Adequate")]):o._e(),o.avail_book_number/o.book_number<.5?e("a-tag",{attrs:{color:"red"}},[o._v("Nervous")]):o._e()],1),e("a-progress",{staticStyle:{color:"green"},attrs:{type:"circle",width:150,percent:parseInt(o.avail_book_number/o.book_number*100),size:"small",status:"active"}}),e("br"),e("br"),e("br"),e("br")],1)],1)],1),e("a-row",[e("a-col",{attrs:{span:8}},[e("a-card",{staticStyle:{width:"750px",height:"200px"},attrs:{bordered:!1}},[e("p",[o._v("Introduction: "+o._s(o.bookInfo.introduction))])])],1)],1)],1),e("a-col",{attrs:{span:8}},[e("img",{attrs:{src:"https://img4.doubanio.com/view/subject/s/public/s34080469.jpg",alt:"img",height:"400"}})])],1),e("a-card",[e("a-table",{attrs:{columns:o.columns,"data-source":o.locationData},scopedSlots:o._u([{key:"status",fn:function(t){return[1==t?e("a-tag",{attrs:{color:"green"}},[o._v("Available")]):0==t?e("a-tag",{attrs:{color:"red"}},[o._v("Lent")]):o._e()]}},{key:"operation",fn:function(t,r){return[e("a-popconfirm",{attrs:{title:"Sure to Borrow?"},on:{confirm:function(){return o.onBorrow(r.key)}}},[e("a",{attrs:{href:"javascript:;"}},[o._v("Borrow")])])]}}])})],1)],1)},n=[],a=e("b85c"),i=(e("d3b7"),[{title:"Room_number",dataIndex:"room_number",key:"room_number"},{title:"Bookshelf",dataIndex:"book_shelf",key:"book_shelf"},{title:"Side",dataIndex:"side",key:"side"},{title:"Layer",dataIndex:"layer",key:"layer"},{title:"Status",dataIndex:"status",key:"status",scopedSlots:{customRender:"status"}},{title:"Operation",key:"operation",scopedSlots:{customRender:"operation"}}]),c={name:"Detail",data:function(){return{book_number:"",avail_book_number:"",locationData:[],columns:i,bookInfo:{ISBN:"",cover:"",book_name:"",introduction:"",publisher:"",published_time:"",author:"",category:""}}},methods:{changeContent:function(){this.$router.push("/book/search").catch((function(o){console.log("输出报错",o)}))},getBookISBN:function(){return this.$route.params.id},onBorrow:function(o){},getBookInfo:function(){var o=this,t="https://www.fastmock.site/mock/891abb0e6bd9ffe5f4e30bde7ed7516e/spm";this.loading=!0;var e=new Headers,r={method:"POST",headers:e,body:this.getBookISBN()};fetch("".concat(t,"/api/book/detail"),r).then((function(o){return o.json()})).then((function(t){console.log(t),0==t.error_code&&(o.bookInfo.ISBN=t.book_info.ISBN,o.bookInfo.cover=t.book_info.cover,o.bookInfo.book_name=t.book_info.book_name,o.bookInfo.introduction=t.book_info.introduction,o.bookInfo.publisher=t.book_info.publisher,o.bookInfo.published_time=t.book_info.published_time,o.bookInfo.author=t.book_info.author,o.bookInfo.category=t.book_info.category)})).catch((function(o){return console.log("error",o)}))},getBookLocations:function(){var o=this,t="https://www.fastmock.site/mock/891abb0e6bd9ffe5f4e30bde7ed7516e/spm";this.loading=!0;var e=new Headers,r={method:"POST",headers:e,body:this.getBookISBN()},n=this;fetch("".concat(t,"/api/book/locations"),r).then((function(o){return o.json()})).then((function(t){if(console.log(t),0==t.error_code){o.book_number=t.locations.length;var e,r=0,i=Object(a["a"])(t.locations);try{for(i.s();!(e=i.n()).done;){var c=e.value;1==c.status&&r++}}catch(s){i.e(s)}finally{i.f()}o.avail_book_number=r,setTimeout((function(){var o,e=0,r=Object(a["a"])(t.locations);try{for(r.s();!(o=r.n()).done;){var i=o.value;n.locationData.push({key:e,status:i.status,room_number:i.room_number,book_shelf:i.book_shelf,side:i.side,layer:i.layer}),e++}}catch(s){r.e(s)}finally{r.f()}n.loading=!1}),200)}})).catch((function(o){return console.log("error",o)}))}},created:function(){this.id=this.getBookISBN(),this.getBookInfo(),this.getBookLocations()}},s=c,u=(e("8ee4"),e("2877")),f=Object(u["a"])(s,r,n,!1,null,null,null);t["default"]=f.exports},"8ee4":function(o,t,e){"use strict";e("47fd")},"9bdd":function(o,t,e){var r=e("825a"),n=e("2a62");o.exports=function(o,t,e,a){try{return a?t(r(e)[0],e[1]):t(e)}catch(i){n(o,"throw",i)}}},a630:function(o,t,e){var r=e("23e7"),n=e("4df4"),a=e("1c7e"),i=!a((function(o){Array.from(o)}));r({target:"Array",stat:!0,forced:i},{from:n})},b0c0:function(o,t,e){var r=e("83ab"),n=e("5e77").EXISTS,a=e("e330"),i=e("9bf2").f,c=Function.prototype,s=a(c.toString),u=/function\b(?:\s|\/\*[\S\s]*?\*\/|\/\/[^\n\r]*[\n\r]+)*([^\s(/]*)/,f=a(u.exec),b="name";r&&!n&&i(c,b,{configurable:!0,get:function(){try{return f(u,s(this))[1]}catch(o){return""}}})},b85c:function(o,t,e){"use strict";e.d(t,"a",(function(){return a}));e("a4d3"),e("e01a"),e("d3b7"),e("d28b"),e("3ca3"),e("ddb0"),e("fb6a"),e("b0c0"),e("a630"),e("ac1f"),e("00b4");function r(o,t){(null==t||t>o.length)&&(t=o.length);for(var e=0,r=new Array(t);e<t;e++)r[e]=o[e];return r}function n(o,t){if(o){if("string"===typeof o)return r(o,t);var e=Object.prototype.toString.call(o).slice(8,-1);return"Object"===e&&o.constructor&&(e=o.constructor.name),"Map"===e||"Set"===e?Array.from(o):"Arguments"===e||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e)?r(o,t):void 0}}function a(o,t){var e="undefined"!==typeof Symbol&&o[Symbol.iterator]||o["@@iterator"];if(!e){if(Array.isArray(o)||(e=n(o))||t&&o&&"number"===typeof o.length){e&&(o=e);var r=0,a=function(){};return{s:a,n:function(){return r>=o.length?{done:!0}:{done:!1,value:o[r++]}},e:function(o){throw o},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,c=!0,s=!1;return{s:function(){e=e.call(o)},n:function(){var o=e.next();return c=o.done,o},e:function(o){s=!0,i=o},f:function(){try{c||null==e["return"]||e["return"]()}finally{if(s)throw i}}}}},fb6a:function(o,t,e){"use strict";var r=e("23e7"),n=e("da84"),a=e("e8b5"),i=e("68ee"),c=e("861d"),s=e("23cb"),u=e("07fa"),f=e("fc6a"),b=e("8418"),l=e("b622"),d=e("1dde"),h=e("f36a"),p=d("slice"),m=l("species"),v=n.Array,k=Math.max;r({target:"Array",proto:!0,forced:!p},{slice:function(o,t){var e,r,n,l=f(this),d=u(l),p=s(o,d),_=s(void 0===t?d:t,d);if(a(l)&&(e=l.constructor,i(e)&&(e===v||a(e.prototype))?e=void 0:c(e)&&(e=e[m],null===e&&(e=void 0)),e===v||void 0===e))return h(l,p,_);for(r=new(void 0===e?v:e)(k(_-p,0)),n=0;p<_;p++,n++)p in l&&b(r,n,l[p]);return r.length=n,r}})}}]);
//# sourceMappingURL=chunk-52479b80.58a58104.js.map
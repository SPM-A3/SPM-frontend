{"version":3,"sources":["webpack:///./src/components/Register.vue?4fad","webpack:///src/components/Register.vue","webpack:///./src/components/Register.vue?af67","webpack:///./src/components/Register.vue"],"names":["render","_vm","this","_h","$createElement","_c","_self","$global","IS_LOGIN","_e","attrs","form","on","handleSubmit","_b","formItemLayout","directives","name","rawName","value","rules","required","message","expression","type","validator","validateToNextPassword","compareToFirstPassword","handleConfirmBlur","slot","_v","whitespace","staticStyle","tailFormItemLayout","loading","staticRenderFns","data","confirmDirty","autoCompleteResult","labelCol","xs","sm","wrapperCol","span","offset","beforeCreate","$form","createForm","methods","e","preventDefault","validateFieldsAndScroll","err","console","log","values","requestOptions","method","body","JSON","stringify","fetch","getFieldValue","callback","validateFields","created","component"],"mappings":"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","file":"js/chunk-2d0b72a8.fb2e462a.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return (!_vm.$global.IS_LOGIN)?_c('a-form',{attrs:{\"form\":_vm.form},on:{\"submit\":_vm.handleSubmit}},[_c('a-form-item',_vm._b({attrs:{\"label\":\"ID\"}},'a-form-item',_vm.formItemLayout,false),[_c('a-input',{directives:[{name:\"decorator\",rawName:\"v-decorator\",value:([\n        'id',\n        {\n          rules: [\n            {\n              required: true,\n              message: 'Please input your ID!',\n            } ],\n        } ]),expression:\"[\\n        'id',\\n        {\\n          rules: [\\n            {\\n              required: true,\\n              message: 'Please input your ID!',\\n            },\\n          ],\\n        },\\n      ]\"}]})],1),_c('a-form-item',_vm._b({attrs:{\"label\":\"E-mail\"}},'a-form-item',_vm.formItemLayout,false),[_c('a-input',{directives:[{name:\"decorator\",rawName:\"v-decorator\",value:([\n        'email',\n        {\n          rules: [\n            {\n              type: 'email',\n              message: 'The input is not valid E-mail!',\n            },\n            {\n              required: true,\n              message: 'Please input your E-mail!',\n            } ],\n        } ]),expression:\"[\\n        'email',\\n        {\\n          rules: [\\n            {\\n              type: 'email',\\n              message: 'The input is not valid E-mail!',\\n            },\\n            {\\n              required: true,\\n              message: 'Please input your E-mail!',\\n            },\\n          ],\\n        },\\n      ]\"}]})],1),_c('a-form-item',_vm._b({attrs:{\"label\":\"Password\",\"has-feedback\":\"\"}},'a-form-item',_vm.formItemLayout,false),[_c('a-input',{directives:[{name:\"decorator\",rawName:\"v-decorator\",value:([\n        'password',\n        {\n          rules: [\n            {\n              required: true,\n              message: 'Please input your password!',\n            },\n            {\n              validator: _vm.validateToNextPassword,\n            } ],\n        } ]),expression:\"[\\n        'password',\\n        {\\n          rules: [\\n            {\\n              required: true,\\n              message: 'Please input your password!',\\n            },\\n            {\\n              validator: validateToNextPassword,\\n            },\\n          ],\\n        },\\n      ]\"}],attrs:{\"type\":\"password\"}})],1),_c('a-form-item',_vm._b({attrs:{\"label\":\"Confirm Password\",\"has-feedback\":\"\"}},'a-form-item',_vm.formItemLayout,false),[_c('a-input',{directives:[{name:\"decorator\",rawName:\"v-decorator\",value:([\n        'confirm',\n        {\n          rules: [\n            {\n              required: true,\n              message: 'Please confirm your password!',\n            },\n            {\n              validator: _vm.compareToFirstPassword,\n            } ],\n        } ]),expression:\"[\\n        'confirm',\\n        {\\n          rules: [\\n            {\\n              required: true,\\n              message: 'Please confirm your password!',\\n            },\\n            {\\n              validator: compareToFirstPassword,\\n            },\\n          ],\\n        },\\n      ]\"}],attrs:{\"type\":\"password\"},on:{\"blur\":_vm.handleConfirmBlur}})],1),_c('a-form-item',_vm._b({},'a-form-item',_vm.formItemLayout,false),[_c('span',{attrs:{\"slot\":\"label\"},slot:\"label\"},[_vm._v(\" Name \")]),_c('a-input',{directives:[{name:\"decorator\",rawName:\"v-decorator\",value:([\n        'name',\n        {\n          rules: [{ required: true, message: 'Please input your name!', whitespace: true }],\n        } ]),expression:\"[\\n        'name',\\n        {\\n          rules: [{ required: true, message: 'Please input your name!', whitespace: true }],\\n        },\\n      ]\"}]})],1),_c('a-form-item',_vm._b({attrs:{\"label\":\"gender\"}},'a-form-item',_vm.formItemLayout,false),[_c('a-select',{directives:[{name:\"decorator\",rawName:\"v-decorator\",value:([\n        'gender',\n        {\n          rules: [{ required: true, message: 'Please select your gender!', whitespace: true, type: 'number' }],\n        } ]),expression:\"[\\n        'gender',\\n        {\\n          rules: [{ required: true, message: 'Please select your gender!', whitespace: true, type: 'number' }],\\n        },\\n      ]\"}]},[_c('a-select-option',{attrs:{\"value\":0}},[_vm._v(\" Male \")]),_c('a-select-option',{attrs:{\"value\":1}},[_vm._v(\" Female \")])],1)],1),_c('a-form-item',_vm._b({attrs:{\"label\":\"Position\"}},'a-form-item',_vm.formItemLayout,false),[_c('a-select',{directives:[{name:\"decorator\",rawName:\"v-decorator\",value:([\n        'position',\n        {\n          rules: [{ required: true, message: 'Please select your position!', whitespace: true, type: 'number' }],\n        } ]),expression:\"[\\n        'position',\\n        {\\n          rules: [{ required: true, message: 'Please select your position!', whitespace: true, type: 'number' }],\\n        },\\n      ]\"}]},[_c('a-select-option',{attrs:{\"value\":0}},[_vm._v(\" Student \")]),_c('a-select-option',{attrs:{\"value\":1}},[_vm._v(\" Teacher \")]),_c('a-select-option',{attrs:{\"value\":2}},[_vm._v(\" Staff \")])],1)],1),_c('a-form-item',_vm._b({attrs:{\"label\":\"Phone Number\"}},'a-form-item',_vm.formItemLayout,false),[_c('a-input',{directives:[{name:\"decorator\",rawName:\"v-decorator\",value:([\n        'phone_number',\n        {\n          rules: [{ required: true, message: 'Please input your phone number!' }],\n        } ]),expression:\"[\\n        'phone_number',\\n        {\\n          rules: [{ required: true, message: 'Please input your phone number!' }],\\n        },\\n      ]\"}],staticStyle:{\"width\":\"100%\"}})],1),_c('a-form-item',_vm._b({},'a-form-item',_vm.tailFormItemLayout,false),[_c('a-button',{attrs:{\"loading\":_vm.loading,\"type\":\"primary\",\"html-type\":\"submit\"}},[_vm._v(\" Register \")])],1)],1):_vm._e()}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <a-form :form=\"form\" @submit=\"handleSubmit\" v-if=\"!$global.IS_LOGIN\">\n    <a-form-item v-bind=\"formItemLayout\" label=\"ID\">\n      <a-input\n        v-decorator=\"[\n          'id',\n          {\n            rules: [\n              {\n                required: true,\n                message: 'Please input your ID!',\n              },\n            ],\n          },\n        ]\"\n      />\n    </a-form-item>\n    <a-form-item v-bind=\"formItemLayout\" label=\"E-mail\">\n      <a-input\n        v-decorator=\"[\n          'email',\n          {\n            rules: [\n              {\n                type: 'email',\n                message: 'The input is not valid E-mail!',\n              },\n              {\n                required: true,\n                message: 'Please input your E-mail!',\n              },\n            ],\n          },\n        ]\"\n      />\n    </a-form-item>\n    <a-form-item v-bind=\"formItemLayout\" label=\"Password\" has-feedback>\n      <a-input\n        v-decorator=\"[\n          'password',\n          {\n            rules: [\n              {\n                required: true,\n                message: 'Please input your password!',\n              },\n              {\n                validator: validateToNextPassword,\n              },\n            ],\n          },\n        ]\"\n        type=\"password\"\n      />\n    </a-form-item>\n    <a-form-item v-bind=\"formItemLayout\" label=\"Confirm Password\" has-feedback>\n      <a-input\n        v-decorator=\"[\n          'confirm',\n          {\n            rules: [\n              {\n                required: true,\n                message: 'Please confirm your password!',\n              },\n              {\n                validator: compareToFirstPassword,\n              },\n            ],\n          },\n        ]\"\n        type=\"password\"\n        @blur=\"handleConfirmBlur\"\n      />\n    </a-form-item>\n    <a-form-item v-bind=\"formItemLayout\">\n      <span slot=\"label\">\n        Name\n      </span>\n      <a-input\n        v-decorator=\"[\n          'name',\n          {\n            rules: [{ required: true, message: 'Please input your name!', whitespace: true }],\n          },\n        ]\"\n      />\n    </a-form-item>\n    <a-form-item v-bind=\"formItemLayout\" label=\"gender\">\n      <a-select  v-decorator=\"[\n          'gender',\n          {\n            rules: [{ required: true, message: 'Please select your gender!', whitespace: true, type: 'number' }],\n          },\n        ]\">\n        <a-select-option :value=\"0\">\n          Male\n        </a-select-option>\n        <a-select-option :value=\"1\">\n          Female\n        </a-select-option>\n      </a-select>\n    </a-form-item>\n    <a-form-item v-bind=\"formItemLayout\" label=\"Position\">\n      <a-select v-decorator=\"[\n          'position',\n          {\n            rules: [{ required: true, message: 'Please select your position!', whitespace: true, type: 'number' }],\n          },\n        ]\">\n        <a-select-option :value=\"0\">\n          Student\n        </a-select-option>\n        <a-select-option :value=\"1\">\n          Teacher\n        </a-select-option>\n        <a-select-option :value=\"2\">\n          Staff\n        </a-select-option>\n      </a-select>\n    </a-form-item>\n    <a-form-item v-bind=\"formItemLayout\" label=\"Phone Number\">\n      <a-input\n        v-decorator=\"[\n          'phone_number',\n          {\n            rules: [{ required: true, message: 'Please input your phone number!' }],\n          },\n        ]\"\n        style=\"width: 100%\"\n      >\n      </a-input>\n    </a-form-item>\n    <a-form-item v-bind=\"tailFormItemLayout\">\n      <a-button :loading=\"loading\" type=\"primary\" html-type=\"submit\">\n        Register\n      </a-button>\n    </a-form-item>\n  </a-form>\n</template>\n\n<script>\nimport {tokenLogin, setUserInfo, setAccessToken} from '../services/user'\n\nexport default {\n  data() {\n    return {\n      confirmDirty: false,\n      autoCompleteResult: [],\n      formItemLayout: {\n        labelCol: {\n          xs: { span: 27 },\n          sm: { span: 9 },\n        },\n        wrapperCol: {\n          xs: { span: 12 },\n          sm: { span: 8 },\n        },\n      },\n      tailFormItemLayout: {\n        wrapperCol: {\n          xs: {\n            span: 27,\n            offset: 0,\n          },\n          sm: {\n            span: 16,\n            offset: 9,\n          },\n        },\n      },\n      loading: false,\n    };\n  },\n  beforeCreate() {\n    let that = this;\n    tokenLogin()\n      .then(res => res.json())\n      .then(res => {\n        const {data, code, msg} = res;\n        if(code == 0 || code == '0'){\n          setUserInfo(data);\n          that.$message.error('You have already logged in.', 1)\n          that.$router.push('/');\n        }else{\n          that.$global.IS_LOGIN = false;\n        }\n      })\n      .catch(err => that.$global.IS_LOGIN = false)\n    this.form = this.$form.createForm(this, { name: 'register' });\n  },\n  methods: {\n    handleSubmit(e) {\n      let that = this;\n      this.loading = true\n      e.preventDefault();\n      this.form.validateFieldsAndScroll((err, values) => {\n        if (!err) {\n          // console.log('Received values of form: ', values);\n          console.log(values)\n          var requestOptions = {\n            method: 'POST',\n            body: JSON.stringify(values),\n          };\n\n          fetch(`${that.$global.BASE_URL}/api/user/register`, requestOptions)\n            .then(response => response.json())\n            .then(result => {\n              console.log(result);\n              if(result.code == 0 || result.code == '0'){\n                that.loading = false;\n                that.$message.success(\"success\", \"Register successfully\");\n                setAccessToken(result.data);\n                that.$router.push('/');\n              }else{\n                that.loading = false;\n                that.$message.error(result.msg);\n              }\n            })\n            .catch(error => {\n              console.log('error', error);\n              that.loading = false;\n              that.$messge.error(\"API call error.\"); \n            });\n        }else{\n          this.loading = false;\n        }\n      });\n    },\n    handleConfirmBlur(e) {\n      const value = e.target.value;\n      this.confirmDirty = this.confirmDirty || !!value;\n    },\n    compareToFirstPassword(rule, value, callback) {\n      const form = this.form;\n      if (value && value !== form.getFieldValue('password')) {\n        callback('Two passwords that you enter is inconsistent!');\n      } else {\n        callback();\n      }\n    },\n    validateToNextPassword(rule, value, callback) {\n      const form = this.form;\n      if (value && this.confirmDirty) {\n        form.validateFields(['confirm'], { force: true });\n      }\n      callback();\n    },\n  },\n  created(){\n  }\n};\n</script>","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Register.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Register.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Register.vue?vue&type=template&id=77761743&\"\nimport script from \"./Register.vue?vue&type=script&lang=js&\"\nexport * from \"./Register.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}
(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d0e57cf"],{9563:function(e,t,n){"use strict";n.r(t);var o=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[[n("a-card",{staticStyle:{width:"240px"},attrs:{hoverable:""},scopedSlots:e._u([{key:"cover",fn:function(){return[n("img",{attrs:{src:e.bookInfo.cover}})]},proxy:!0}])})],[n("a-descriptions",{attrs:{title:"Reservation Info",size:"default",bordered:""}},[n("a-descriptions-item",{attrs:{label:"book name"}},[e._v(e._s(this.bookInfo.bookName))]),n("a-descriptions-item",{attrs:{label:"reservation id"}},[e._v(e._s(e.reservationDetail.reservation_id))]),n("a-descriptions-item",{attrs:{label:"ISBN"}},[e._v(e._s(e.reservationDetail.ISBN))]),n("a-descriptions-item",{attrs:{label:"reservation time"}},[e._v(e._s(e.reservationDetail.reservation_time))]),n("a-descriptions-item",{attrs:{label:"status"}},[e._v(e._s(e.reservationDetail.status))])],1)],0===e.reservationDetail.status?n("a-tooltip",{staticClass:"item",attrs:{effect:"dark",size:"small",content:"详情",placement:"top"}},[n("a-popconfirm",{attrs:{title:"Title"},on:{confirm:function(t){return e.cancelReservation()},cancel:e.cancel}},[n("a-button",{style:{top:"8px",marginLeft:"8px"},attrs:{type:"primary",icon:"el-icon-edit"}},[e._v(" cancel ")])],1),n("a-button",{style:{top:"8px",marginLeft:"8px"},attrs:{type:"primary",icon:"el-icon-edit"},on:{click:e.borrow}},[e._v(" borrow ")])],1):e._e()],2)},a=[],r=n("1da1"),i=(n("96cf"),n("d3b7"),n("e9c4"),n("93d6")),s={data:function(){return{reservationDetail:[],book_name:"null",book_cover:"",bookInfo:[],isRouterAlive:!0}},created:function(){this.getReservationDetail(this.$route.params.id)},methods:{getReservationDetail:function(e){var t=this;return Object(r["a"])(regeneratorRuntime.mark((function n(){var o,a,r,s,c,l,u,d,p;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return console.log(e),o=t,a=new Headers,a.append("token",Object(i["c"])()),a.append("Content-Type","application/json"),r={method:"GET",headers:a},s=t.$global.BASE_URL+"/api/reservation/detail?reservation_id="+e,c=new Request(s,r),n.next=10,fetch(c).then((function(e){return e.json()})).then((function(e){console.log(e),o.reservationDetail=e.data})).catch((function(e){return console.log("Request Failed",e)}));case 10:return l=new Headers,l.append("Content-Type","application/json"),l.append("token",Object(i["c"])()),u={method:"GET",headers:l},d=t.$global.BASE_URL+"/api/admin/book/detail?ISBN="+t.reservationDetail.ISBN,p=new Request(d,u),n.next=18,fetch(p).then((function(e){return e.json()})).then((function(e){console.log("book_detail",e),o.book_name=e.data[0].bookName,o.book_cover=e.data[0].cover,o.bookInfo=e.data[0]}));case 18:case"end":return n.stop()}}),n)})))()},cancelReservation:function(){var e=this,t=this.reservationDetail.reservation_id;console.log(t);var n=new Headers;n.append("token",Object(i["c"])()),n.append("Content-Type","application/json");var o={method:"POST",body:JSON.stringify({reservation_id:t}),headers:n},a=new Request("".concat(this.$global.BASE_URL,"/api/user/reservation/cancel"),o);fetch(a).then((function(e){return e.json()})).then((function(t){console.log("cancel",t),0===t.code?e.$message.success("cancel successfully!"):e.$message.error(t.msg)})).catch((function(e){return console.log("Request Failed",e)}))},cancel:function(){this.$message.error("Click on No")},borrow:function(){this.$router.push("/book/".concat(this.reservationDetail.ISBN))},reload:function(){this.isRouterAlive=!1,this.$nextTick((function(){this.isRouterAlive=!0}))}}},c=s,l=n("2877"),u=Object(l["a"])(c,o,a,!1,null,null,null);t["default"]=u.exports}}]);
//# sourceMappingURL=chunk-2d0e57cf.2f465fe4.js.map
(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-71c4568c"],{"0c99":function(e,t,a){"use strict";a("5a0c")},1276:function(e,t,a){"use strict";var l=a("2ba4"),n=a("c65b"),r=a("e330"),o=a("d784"),u=a("44e7"),i=a("825a"),c=a("1d80"),s=a("4840"),b=a("8aa5"),f=a("50c4"),p=a("577e"),d=a("dc4a"),v=a("4dae"),h=a("14c3"),g=a("9263"),m=a("9f7f"),w=a("d039"),y=m.UNSUPPORTED_Y,I=4294967295,k=Math.min,O=[].push,B=r(/./.exec),x=r(O),C=r("".slice),S=!w((function(){var e=/(?:)/,t=e.exec;e.exec=function(){return t.apply(this,arguments)};var a="ab".split(e);return 2!==a.length||"a"!==a[0]||"b"!==a[1]}));o("split",(function(e,t,a){var r;return r="c"=="abbc".split(/(b)*/)[1]||4!="test".split(/(?:)/,-1).length||2!="ab".split(/(?:ab)*/).length||4!=".".split(/(.?)(.?)/).length||".".split(/()()/).length>1||"".split(/.?/).length?function(e,a){var r=p(c(this)),o=void 0===a?I:a>>>0;if(0===o)return[];if(void 0===e)return[r];if(!u(e))return n(t,r,e,o);var i,s,b,f=[],d=(e.ignoreCase?"i":"")+(e.multiline?"m":"")+(e.unicode?"u":"")+(e.sticky?"y":""),h=0,m=new RegExp(e.source,d+"g");while(i=n(g,m,r)){if(s=m.lastIndex,s>h&&(x(f,C(r,h,i.index)),i.length>1&&i.index<r.length&&l(O,f,v(i,1)),b=i[0].length,h=s,f.length>=o))break;m.lastIndex===i.index&&m.lastIndex++}return h===r.length?!b&&B(m,"")||x(f,""):x(f,C(r,h)),f.length>o?v(f,0,o):f}:"0".split(void 0,0).length?function(e,a){return void 0===e&&0===a?[]:n(t,this,e,a)}:t,[function(t,a){var l=c(this),o=void 0==t?void 0:d(t,e);return o?n(o,t,l,a):n(r,p(l),t,a)},function(e,l){var n=i(this),o=p(e),u=a(r,n,o,l,r!==t);if(u.done)return u.value;var c=s(n,RegExp),d=n.unicode,v=(n.ignoreCase?"i":"")+(n.multiline?"m":"")+(n.unicode?"u":"")+(y?"g":"y"),g=new c(y?"^(?:"+n.source+")":n,v),m=void 0===l?I:l>>>0;if(0===m)return[];if(0===o.length)return null===h(g,o)?[o]:[];var w=0,O=0,B=[];while(O<o.length){g.lastIndex=y?0:O;var S,P=h(g,y?C(o,O):o);if(null===P||(S=k(f(g.lastIndex+(y?O:0)),o.length))===w)O=b(o,O,d);else{if(x(B,C(o,w,O)),B.length===m)return B;for(var R=1;R<=P.length-1;R++)if(x(B,P[R]),B.length===m)return B;O=w=S}}return x(B,C(o,w)),B}]}),!S,y)},"14c3":function(e,t,a){var l=a("da84"),n=a("c65b"),r=a("825a"),o=a("1626"),u=a("c6b6"),i=a("9263"),c=l.TypeError;e.exports=function(e,t){var a=e.exec;if(o(a)){var l=n(a,e,t);return null!==l&&r(l),l}if("RegExp"===u(e))return n(i,e,t);throw c("RegExp#exec called on incompatible receiver")}},"159b":function(e,t,a){var l=a("da84"),n=a("fdbc"),r=a("785a"),o=a("17c2"),u=a("9112"),i=function(e){if(e&&e.forEach!==o)try{u(e,"forEach",o)}catch(t){e.forEach=o}};for(var c in n)n[c]&&i(l[c]&&l[c].prototype);i(r)},"17c2":function(e,t,a){"use strict";var l=a("b727").forEach,n=a("a640"),r=n("forEach");e.exports=r?[].forEach:function(e){return l(this,e,arguments.length>1?arguments[1]:void 0)}},"25f0":function(e,t,a){"use strict";var l=a("e330"),n=a("5e77").PROPER,r=a("6eeb"),o=a("825a"),u=a("3a9b"),i=a("577e"),c=a("d039"),s=a("ad6d"),b="toString",f=RegExp.prototype,p=f[b],d=l(s),v=c((function(){return"/a/b"!=p.call({source:"a",flags:"b"})})),h=n&&p.name!=b;(v||h)&&r(RegExp.prototype,b,(function(){var e=o(this),t=i(e.source),a=e.flags,l=i(void 0===a&&u(f,e)&&!("flags"in f)?d(e):a);return"/"+t+"/"+l}),{unsafe:!0})},"44e7":function(e,t,a){var l=a("861d"),n=a("c6b6"),r=a("b622"),o=r("match");e.exports=function(e){var t;return l(e)&&(void 0!==(t=e[o])?!!t:"RegExp"==n(e))}},"4de4":function(e,t,a){"use strict";var l=a("23e7"),n=a("b727").filter,r=a("1dde"),o=r("filter");l({target:"Array",proto:!0,forced:!o},{filter:function(e){return n(this,e,arguments.length>1?arguments[1]:void 0)}})},5530:function(e,t,a){"use strict";a.d(t,"a",(function(){return r}));a("b64b"),a("a4d3"),a("4de4"),a("d3b7"),a("e439"),a("159b"),a("dbb4");function l(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function n(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);t&&(l=l.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,l)}return a}function r(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?n(Object(a),!0).forEach((function(t){l(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):n(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}},"5a0c":function(e,t,a){},6391:function(e,t,a){"use strict";a.r(t);var l=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("a-card",{attrs:{"body-style":{padding:"24px 32px"},bordered:!1,title:"Add book"}},[a("a-form",[a("a-form-item",{attrs:{label:"cover",labelCol:{span:7},wrapperCol:{span:10}}},[a("a-upload",{staticClass:"avatar-uploader",attrs:{name:"avatar","list-type":"picture-card","show-upload-list":!1,customRequest:e.upload}},[e.newBookInfo.cover?a("img",{attrs:{src:e.newBookInfo.cover,alt:"avatar"}}):a("div",[a("a-icon",{attrs:{type:e.loading?"loading":"plus"}}),a("div",{staticClass:"ant-upload-text"},[e._v(" UPLOAD COVER ")])],1)])],1),a("a-form-item",{attrs:{label:e.bookName,labelCol:{span:7},wrapperCol:{span:10}}},[a("a-input",{attrs:{placeholder:e.bookNameInput},model:{value:e.newBookInfo.book_name,callback:function(t){e.$set(e.newBookInfo,"book_name",t)},expression:"newBookInfo.book_name"}})],1),a("a-form-item",{attrs:{label:e.author,labelCol:{span:7},wrapperCol:{span:10}}},[a("a-input",{attrs:{placeholder:e.authorInput},model:{value:e.newBookInfo.author,callback:function(t){e.$set(e.newBookInfo,"author",t)},expression:"newBookInfo.author"}})],1),a("a-form-item",{attrs:{label:e.publisher,labelCol:{span:7},wrapperCol:{span:10}}},[a("a-input",{attrs:{placeholder:e.publisherInput},model:{value:e.newBookInfo.publisher,callback:function(t){e.$set(e.newBookInfo,"publisher",t)},expression:"newBookInfo.publisher"}})],1),a("a-form-item",{attrs:{label:e.ISBN,labelCol:{span:7},wrapperCol:{span:10}}},[a("a-input",{attrs:{placeholder:e.ISBNInput},model:{value:e.newBookInfo.ISBN,callback:function(t){e.$set(e.newBookInfo,"ISBN",t)},expression:"newBookInfo.ISBN"}})],1),a("a-form-item",{attrs:{label:e.publishedTime,labelCol:{span:7},wrapperCol:{span:10}}},[a("a-month-picker",{staticStyle:{width:"100%"},attrs:{placeholder:e.publishedTimeInput},model:{value:e.newBookInfo.published_time,callback:function(t){e.$set(e.newBookInfo,"published_time",t)},expression:"newBookInfo.published_time"}})],1),a("a-form-item",{attrs:{label:e.category,labelCol:{span:7},wrapperCol:{span:10}}},[a("a-cascader",{attrs:{options:e.options,placeholder:e.categoryInput,"show-search":{filter:e.filter}},model:{value:e.newBookInfo.category,callback:function(t){e.$set(e.newBookInfo,"category",t)},expression:"newBookInfo.category"}})],1),a("a-form-item",{attrs:{label:e.briefIntroduction,labelCol:{span:7},wrapperCol:{span:10}}},[a("a-textarea",{attrs:{rows:"4",placeholder:e.briefIntroductionInput},model:{value:e.newBookInfo.brief_introduction,callback:function(t){e.$set(e.newBookInfo,"brief_introduction",t)},expression:"newBookInfo.brief_introduction"}})],1),a("a-form-item",{staticStyle:{"margin-top":"24px"},attrs:{wrapperCol:{span:10,offset:7}}},[a("a-button",{attrs:{type:"primary"},on:{click:e.submit}},[e._v("Add")]),a("a-button",{on:{click:function(t){return e.$router.push("/admin")}}},[e._v("CANCEL")])],1)],1)],1)},n=[],r=a("5530"),o=a("1da1"),u=(a("ac1f"),a("1276"),a("d3b7"),a("25f0"),a("e9c4"),a("96cf"),a("93d6")),i=a("e81a");function c(e,t){var a=new FileReader;a.addEventListener("load",(function(){return t(a.result)})),a.readAsDataURL(e)}var s={name:"BookAdd",data:function(){return{baseUrl:"https://www.fastmock.site/mock/0aee7559464fadc986c2e38e63492a86/spm",loading:!1,bookName:"Book name",bookNameInput:"Please input book name",author:"Author",authorInput:"Please input author",publisher:"Publisher",publisherInput:"Please input publisher",ISBN:"ISBN",ISBNInput:"Please input ISBN",category:"Category",categoryInput:"Please enter or select category",publishedTime:"Publish date",publishedTimeInput:"Please select publish date",briefIntroduction:"Introduction",briefIntroductionInput:"Please input introduction",newBookInfo:{book_name:void 0,author:void 0,publisher:void 0,ISBN:void 0,category:void 0,published_time:void 0,cover:void 0,brief_introduction:void 0},options:[]}},created:function(){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,i["a"].getOptions();case 2:e.options=t.sent;case 3:case"end":return t.stop()}}),t)})))()},methods:{handleUpdate:function(e){var t=this;"uploading"!==e.file.status?"done"===e.file.status&&c(e.file.originFileObj,(function(e){t.newBookInfo.cover=e,t.loading=!1})):this.loading=!0},upload:function(e){var t=this;this.loading=!0;var a=new FileReader;a.readAsDataURL(e.file),a.onloadend=function(e){var a=this,l=e.target.result.toString().split(",")[1];if(e&&e.target&&e.target.result){var n=l,r={method:"POST",body:n};fetch("https://service-rb270dgm-1301774019.gz.apigw.tencentcs.com/release/SPM_uploadimage",r).then((function(e){return e.text()})).then((function(e){a.loading=!1,t.newBookInfo.cover=e,console.log(e)})).catch((function(e){console.log("error",e),t.loading=!1}))}}},submit:function(){var e=Object(r["a"])({},this.newBookInfo);e.category=this.newBookInfo.category[1],e.published_time=e.published_time.format("YYYY-MM")+"-01",console.log(e);var t=new Headers;t.append("token",Object(u["c"])()),t.append("Content-Type","application/json");var a=e,l={method:"POST",headers:t,body:JSON.stringify(a)},n=this;fetch("".concat(this.$global.BASE_URL,"/api/admin/book/add"),l).then((function(e){return e.json()})).then((function(e){0===e.code||"0"===e.code?(n.$message.success("Add book successfully"),setTimeout((function(){n.$router.push("/admin?tab=user")}),200)):n.$message.error(e.error_msg)})).catch((function(e){n.$message.error("API call failed.")}))},filter:function(e,t){return t.some((function(t){return t.label.toLowerCase().indexOf(e.toLowerCase())>-1}))}}},b=s,f=(a("0c99"),a("2877")),p=Object(f["a"])(b,l,n,!1,null,null,null);t["default"]=p.exports},"8aa5":function(e,t,a){"use strict";var l=a("6547").charAt;e.exports=function(e,t,a){return t+(a?l(e,t).length:1)}},a640:function(e,t,a){"use strict";var l=a("d039");e.exports=function(e,t){var a=[][e];return!!a&&l((function(){a.call(null,t||function(){throw 1},1)}))}},b64b:function(e,t,a){var l=a("23e7"),n=a("7b0b"),r=a("df75"),o=a("d039"),u=o((function(){r(1)}));l({target:"Object",stat:!0,forced:u},{keys:function(e){return r(n(e))}})},d784:function(e,t,a){"use strict";a("ac1f");var l=a("e330"),n=a("6eeb"),r=a("9263"),o=a("d039"),u=a("b622"),i=a("9112"),c=u("species"),s=RegExp.prototype;e.exports=function(e,t,a,b){var f=u(e),p=!o((function(){var t={};return t[f]=function(){return 7},7!=""[e](t)})),d=p&&!o((function(){var t=!1,a=/a/;return"split"===e&&(a={},a.constructor={},a.constructor[c]=function(){return a},a.flags="",a[f]=/./[f]),a.exec=function(){return t=!0,null},a[f](""),!t}));if(!p||!d||a){var v=l(/./[f]),h=t(f,""[e],(function(e,t,a,n,o){var u=l(e),i=t.exec;return i===r||i===s.exec?p&&!o?{done:!0,value:v(t,a,n)}:{done:!0,value:u(a,t,n)}:{done:!1}}));n(String.prototype,e,h[0]),n(s,f,h[1])}b&&i(s[f],"sham",!0)}},dbb4:function(e,t,a){var l=a("23e7"),n=a("83ab"),r=a("56ef"),o=a("fc6a"),u=a("06cf"),i=a("8418");l({target:"Object",stat:!0,sham:!n},{getOwnPropertyDescriptors:function(e){var t,a,l=o(e),n=u.f,c=r(l),s={},b=0;while(c.length>b)a=n(l,t=c[b++]),void 0!==a&&i(s,t,a);return s}})},e439:function(e,t,a){var l=a("23e7"),n=a("d039"),r=a("fc6a"),o=a("06cf").f,u=a("83ab"),i=n((function(){o(1)})),c=!u||i;l({target:"Object",stat:!0,forced:c,sham:!u},{getOwnPropertyDescriptor:function(e,t){return o(r(e),t)}})},e81a:function(e,t,a){"use strict";a("a4d3"),a("e01a"),a("d3b7"),a("d28b"),a("3ca3"),a("ddb0");function l(e){return l="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},l(e)}var n=a("1da1"),r=(a("96cf"),a("e9c4"),[{value:"A",label:"A马克思主义、列宁主义、毛泽东思想、邓小平理论",children:[{value:"A",label:"全部"},{value:"A1",label:"A1马克思、恩格斯著作"},{value:"A2",label:"A2毛泽东著作"},{value:"A3",label:"A3马克思主义、列宁主义、毛泽东思想、邓小平理论的学习和研究"}]},{value:"B",label:"B哲学、宗教",children:[{value:"B",label:"全部"},{value:"B0",label:"B0哲学理论"},{value:"B81",label:"B81逻辑学"},{value:"B84",label:"B84心理学"}]},{value:"C",label:"C社会科学总论",children:[{value:"C",label:"全部"},{value:"C0",label:"C0社会科学理论与方法论"},{value:"C91",label:"C91社会学"},{value:"C8",label:"C8统计学"},{value:"C93",label:"C93管理学"}]},{value:"D",label:"D政治、法律",children:[{value:"D",label:"全部"},{value:"D2",label:"D2中国共产党"},{value:"D8",label:"D8外交、国际关系"},{value:"D9",label:"D9法律"}]},{value:"E",label:"E军事",children:[{value:"E",label:"全部"},{value:"E0",label:"E0军事理论"},{value:"E2",label:"E2中国军事"}]},{value:"F",label:"F经济",children:[{value:"F",label:"全部"},{value:"F0",label:"F0经济学"},{value:"F8",label:"F8财政、金融"}]},{value:"G",label:"G文化、科学、教育、体育",children:[{value:"G",label:"全部"},{value:"G4",label:"G4教育"},{value:"",label:"G8体育"}]},{value:"H",label:"H语言、文字",children:[{value:"H",label:"全部"},{value:"H0",label:"H0语言学"},{value:"H1",label:"H1汉语"},{value:"H3",label:"H3常用外国语"}]},{value:"I",label:"I文学",children:[{value:"I",label:"全部"},{value:"I1",label:"I1世界文学"},{value:"I2",label:"I2中国文学"}]},{value:"J",label:"J艺术",children:[{value:"J",label:"全部"},{value:"J2",label:"J2绘画"},{value:"J9",label:"J9电影、电视艺术"}]},{value:"K",label:"K历史、地理",children:[{value:"K",label:"全部"},{value:"K1",label:"K1世界史"},{value:"K2",label:"K2中国史"},{value:"K9",label:"K9地理"}]},{value:"N",label:"N自然科学总论",children:[{value:"N",label:"全部"},{value:"N0",label:"N0自然科学理论与方法论"}]},{value:"O",label:"O数理科学和化学",children:[{value:"O",label:"全部"},{value:"O1",label:"O1数学"},{value:"O4",label:"O4物理学"},{value:"O6",label:"O6化学"}]},{value:"P",label:"P天文学、地球科学",children:[{value:"P",label:"全部"},{value:"P1",label:"P1天文学"},{value:"P9",label:"P9自然地理学"}]},{value:"Q",label:"Q生物科学",children:[{value:"Q",label:"全部"},{value:"Q2",label:"Q2细胞生物学"},{value:"Q4",label:"Q4遗传学"},{value:"Q94",label:"Q94植物学"}]},{value:"R",label:"R医药、卫生",children:[{value:"R",label:"全部"},{value:"R3",label:"R3基础医学"},{value:"R4",label:"R4临床医学"},{value:"R9",label:"R9药学"}]},{value:"S",label:"S农业科学",children:[{value:"S",label:"全部"},{value:"S1",label:"S1农业基础科学"},{value:"S6",label:"S6园艺"}]},{value:"T",label:"T工业技术",children:[{value:"T",label:"全部"},{value:"TB",label:"TB一般工业技术"},{value:"TN",label:"TN无线电电子学、电信技术"},{value:"TP",label:"TP自动化技术、计算机技术"}]},{value:"U",label:"U交通运输",children:[{value:"U",label:"全部"},{value:"U2",label:"U2铁路运输"},{value:"U4",label:"U4公路运输"},{value:"U6",label:"U6水路运输"}]},{value:"V",label:"V航空、航天",children:[{value:"V",label:"全部"},{value:"V2",label:"V2航空"},{value:"V4",label:"V4航天"}]},{value:"X",label:"X环境科学、安全科学",children:[{value:"X",label:"全部"},{value:"X1",label:"X1环境科学基础理论"},{value:"X3",label:"X3环境保护管理"}]},{value:"Z",label:"Z综合类图书",children:[{value:"Z",label:"全部"}]}]),o=function(){var e=Object(n["a"])(regeneratorRuntime.mark((function e(){var t,a,l;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:t=new Headers,t.append("Content-Type","application/json"),a=JSON.stringify({category:JSON.stringify(r)}),l={method:"POST",headers:t,body:a,redirect:"follow"},fetch("https://testip-cloud-homework-lralemfqco.cn-hangzhou.fcapp.run/editgory",l).then((function(e){return e.text()})).then((function(e){return console.log(e)})).catch((function(e){return console.log("error",e)}));case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),u=function(){var e=Object(n["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return console.log("getOptions"),e.next=3,fetch("https://testip-cloud-homework-lralemfqco.cn-hangzhou.fcapp.run/category").then((function(e){return e.json()})).then((function(e){return JSON.parse(e.categoryString)}));case 3:return t=e.sent,console.log(l(t)),e.abrupt("return",t);case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();t["a"]={getOptions:u,resetOptions:o}}}]);
//# sourceMappingURL=chunk-71c4568c.2c61ebd8.js.map
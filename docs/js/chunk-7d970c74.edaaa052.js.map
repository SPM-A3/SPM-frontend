{"version":3,"sources":["webpack:///./src/components/book/BookDetail.vue?bcbe","webpack:///src/components/book/BookDetail.vue","webpack:///./src/components/book/BookDetail.vue?a00c","webpack:///./src/components/book/BookDetail.vue?c947","webpack:///./src/components/book/BookDetail.vue?d72b"],"names":["render","_vm","this","_h","$createElement","_c","_self","attrs","staticStyle","bookInfo","book_name","_v","_s","ISBN","author","category","publisher","published_time","avail_book_number","book_number","_e","parseInt","introduction","columns","locationData","scopedSlots","_u","key","fn","status","text","record","on","onBorrow","staticRenderFns","name","data","cover","methods","changeContent","console","log","err","getBookISBN","$route","params","id","getBookInfo","loading","method","headers","myHeaders","body","fetch","getBookLocations","i","num","that","push","room_number","book_shelf","side","layer","created","component"],"mappings":"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","file":"js/chunk-7d970c74.edaaa052.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('a-card',{attrs:{\"bordered\":false}},[_c('a-col',{attrs:{\"span\":16}},[_c('a-row',[_c('a-col',{attrs:{\"span\":8}},[_c('a-card',{staticStyle:{\"width\":\"500px\",\"height\":\"250px\"},attrs:{\"title\":_vm.bookInfo.book_name,\"bordered\":false}},[_c('p',[_vm._v(\"ISBN: \"+_vm._s(_vm.bookInfo.ISBN))]),_c('p',[_vm._v(\"Author: \"+_vm._s(_vm.bookInfo.author))]),_c('p',[_vm._v(\"Category: \"+_vm._s(_vm.bookInfo.category))]),_c('p',[_vm._v(\"Publisher: \"+_vm._s(_vm.bookInfo.publisher))]),_c('p',[_vm._v(\"Published Time: \"+_vm._s(_vm.bookInfo.published_time))])])],1),_c('a-col',{attrs:{\"offset\":16}},[_c('a-card',{staticStyle:{\"height\":\"200px\",\"width\":\"300px\"},attrs:{\"bordered\":false,\"size\":\"small\"}},[_c('br'),_c('br'),_c('p',[_c('b',[_vm._v(\"Available Number: \"+_vm._s(_vm.avail_book_number))]),_vm._v(\"  \"),(_vm.avail_book_number / _vm.book_number >= 0.5)?_c('a-tag',{attrs:{\"color\":\"green\"}},[_vm._v(\"Adequate\")]):_vm._e(),(_vm.avail_book_number / _vm.book_number < 0.5)?_c('a-tag',{attrs:{\"color\":\"red\"}},[_vm._v(\"Nervous\")]):_vm._e()],1),_c('a-progress',{staticStyle:{\"color\":\"green\"},attrs:{\"type\":\"circle\",\"width\":150,\"percent\":parseInt((_vm.avail_book_number / _vm.book_number) * 100),\"size\":\"small\",\"status\":\"active\"}}),_c('br'),_c('br'),_c('br'),_c('br')],1)],1)],1),_c('a-row',[_c('a-col',{attrs:{\"span\":8}},[_c('a-card',{staticStyle:{\"width\":\"750px\",\"height\":\"200px\"},attrs:{\"bordered\":false}},[_c('p',[_vm._v(\"Introduction: \"+_vm._s(_vm.bookInfo.introduction))])])],1)],1)],1),_c('a-col',{attrs:{\"span\":8}},[_c('img',{attrs:{\"src\":\"https://img4.doubanio.com/view/subject/s/public/s34080469.jpg\",\"alt\":\"img\",\"height\":\"400\"}})])],1),_c('a-card',[_c('a-table',{attrs:{\"columns\":_vm.columns,\"data-source\":_vm.locationData},scopedSlots:_vm._u([{key:\"status\",fn:function(status){return [(status == 1)?_c('a-tag',{attrs:{\"color\":\"green\"}},[_vm._v(\"Available\")]):(status == 0)?_c('a-tag',{attrs:{\"color\":\"red\"}},[_vm._v(\"Lent\")]):_vm._e()]}},{key:\"operation\",fn:function(text, record){return [_c('a-popconfirm',{attrs:{\"title\":\"Sure to Borrow?\"},on:{\"confirm\":function () { return _vm.onBorrow(record.key); }}},[_c('a',{attrs:{\"href\":\"javascript:;\"}},[_vm._v(\"Borrow\")])])]}}])})],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <div>\r\n    \r\n    \r\n    \r\n        <!-- 图书详情：{{ $route.params.id }}\r\n    使用$route.params.id可以获取图书id，使用这个id调用图书api -->\r\n        <a-card :bordered=\"false\">\r\n          <a-col :span=\"16\">\r\n            <a-row>\r\n              <a-col :span=\"8\">\r\n                <a-card\r\n                  :title=\"bookInfo.book_name\"\r\n                  style=\"width: 500px; height: 250px\"\r\n                  :bordered=\"false\"\r\n                >\r\n                  <p>ISBN: {{ bookInfo.ISBN }}</p>\r\n                  <p>Author: {{ bookInfo.author }}</p>\r\n                  <p>Category: {{ bookInfo.category }}</p>\r\n                  <p>Publisher: {{ bookInfo.publisher }}</p>\r\n                  <p>Published Time: {{ bookInfo.published_time }}</p>\r\n                </a-card>\r\n              </a-col>\r\n              <a-col :offset=\"16\">\r\n                <a-card\r\n                  style=\"height: 200px; width: 300px\"\r\n                  :bordered=\"false\"\r\n                  size=\"small\"\r\n                >\r\n                  <br /><br />\r\n                  <p>\r\n                    <b>Available Number: {{ avail_book_number }}</b>&nbsp;\r\n                    <a-tag\r\n                      v-if=\"avail_book_number / book_number >= 0.5\"\r\n                      color=\"green\"\r\n                      >Adequate</a-tag\r\n                    >\r\n                    <a-tag\r\n                      v-if=\"avail_book_number / book_number < 0.5\"\r\n                      color=\"red\"\r\n                      >Nervous</a-tag\r\n                    >\r\n                  </p>\r\n\r\n                  <a-progress\r\n                    type=\"circle\"\r\n                    :width=\"150\"\r\n                    :percent=\"parseInt((avail_book_number / book_number) * 100)\"\r\n                    size=\"small\"\r\n                    status=\"active\"\r\n                    style=\"color: green\"\r\n                  />\r\n                  <br /><br />\r\n\r\n                  <!-- <a-button type=\"primary\">预约</a-button> -->\r\n                  <br /><br />\r\n                  <!-- <a-button type=\"primary\">借阅</a-button> -->\r\n                </a-card>\r\n              </a-col>\r\n            </a-row>\r\n\r\n            <a-row>\r\n              <a-col :span=\"8\">\r\n                <a-card style=\"width: 750px; height: 200px\" :bordered=\"false\">\r\n                  <p>Introduction: {{ bookInfo.introduction }}</p>\r\n                </a-card>\r\n              </a-col>\r\n            </a-row>\r\n          </a-col>\r\n\r\n          <a-col :span=\"8\">\r\n            <img\r\n              src=\"https://img4.doubanio.com/view/subject/s/public/s34080469.jpg\"\r\n              alt=\"img\"\r\n              height=\"400\"\r\n            />\r\n          </a-col>\r\n        </a-card>\r\n\r\n        <a-card>\r\n          <a-table :columns=\"columns\" :data-source=\"locationData\">\r\n            <template slot=\"status\" slot-scope=\"status\">\r\n              <a-tag v-if=\"status == 1\" color=\"green\">Available</a-tag>\r\n              <a-tag v-else-if=\"status == 0\" color=\"red\">Lent</a-tag>\r\n            </template>\r\n\r\n            <template slot=\"operation\" slot-scope=\"text, record\">\r\n              <a-popconfirm\r\n                title=\"Sure to Borrow?\"\r\n                @confirm=\"() => onBorrow(record.key)\"\r\n              >\r\n                <a href=\"javascript:;\">Borrow</a>\r\n              </a-popconfirm>\r\n            </template>\r\n          </a-table>\r\n        </a-card>\r\n     \r\n  </div>\r\n</template>\r\n\r\n<script>\r\nconst columns = [\r\n  {\r\n    title: \"Room_number\",\r\n    dataIndex: \"room_number\",\r\n    key: \"room_number\",\r\n  },\r\n  {\r\n    title: \"Bookshelf\",\r\n    dataIndex: \"book_shelf\",\r\n    key: \"book_shelf\",\r\n  },\r\n  {\r\n    title: \"Side\",\r\n    dataIndex: \"side\",\r\n    key: \"side\",\r\n  },\r\n  {\r\n    title: \"Layer\",\r\n    dataIndex: \"layer\",\r\n    key: \"layer\",\r\n  },\r\n  {\r\n    title: \"Status\",\r\n    dataIndex: \"status\",\r\n    key: \"status\",\r\n    scopedSlots: { customRender: \"status\" },\r\n  },\r\n  {\r\n    title: \"Operation\",\r\n    key: \"operation\",\r\n    scopedSlots: { customRender: \"operation\" },\r\n  },\r\n];\r\n\r\nexport default {\r\n  name: \"Detail\",\r\n  data() {\r\n    return {\r\n      book_number: \"\",\r\n      avail_book_number: \"\",\r\n\r\n      locationData: [],\r\n      columns,\r\n\r\n      bookInfo: {\r\n        ISBN: \"\",\r\n        cover: \"\",\r\n        book_name: \"\",\r\n        introduction: \"\",\r\n        publisher: \"\",\r\n        published_time: \"\",\r\n        author: \"\",\r\n        category: \"\",\r\n      },\r\n    };\r\n  },\r\n  methods: {\r\n    changeContent() {\r\n       this.$router.push(\"/book/search\").catch((err) => {\r\n        console.log(\"输出报错\", err);\r\n      });\r\n    },\r\n\r\n    getBookISBN() {\r\n      return this.$route.params.id;\r\n    },\r\n\r\n    //借阅接口\r\n    onBorrow(key) {},\r\n\r\n    getBookInfo() {\r\n      let base_url =\r\n        \"https://www.fastmock.site/mock/891abb0e6bd9ffe5f4e30bde7ed7516e/spm\";\r\n      this.loading = true;\r\n      let myHeaders = new Headers();\r\n      let requestoptions = {\r\n        method: \"POST\",\r\n        headers: myHeaders,\r\n        body: this.getBookISBN(),\r\n      };\r\n\r\n      let that = this;\r\n      fetch(`${base_url}/api/book/detail`, requestoptions)\r\n        .then((response) => response.json())\r\n        .then((result) => {\r\n          console.log(result);\r\n          if (result.error_code == 0) {\r\n            this.bookInfo.ISBN = result.book_info.ISBN;\r\n            this.bookInfo.cover = result.book_info.cover;\r\n            this.bookInfo.book_name = result.book_info.book_name;\r\n            this.bookInfo.introduction = result.book_info.introduction;\r\n            this.bookInfo.publisher = result.book_info.publisher;\r\n            this.bookInfo.published_time = result.book_info.published_time;\r\n            this.bookInfo.author = result.book_info.author;\r\n            this.bookInfo.category = result.book_info.category;\r\n          }\r\n        })\r\n        .catch((error) => console.log(\"error\", error));\r\n    },\r\n\r\n    getBookLocations() {\r\n      let base_url =\r\n        \"https://www.fastmock.site/mock/891abb0e6bd9ffe5f4e30bde7ed7516e/spm\";\r\n      this.loading = true;\r\n      let myHeaders = new Headers();\r\n      let requestoptions = {\r\n        method: \"POST\",\r\n        headers: myHeaders,\r\n        body: this.getBookISBN(),\r\n      };\r\n\r\n      let that = this;\r\n      fetch(`${base_url}/api/book/locations`, requestoptions)\r\n        .then((response) => response.json())\r\n        .then((result) => {\r\n          console.log(result);\r\n          if (result.error_code == 0) {\r\n            this.book_number = result.locations.length;\r\n            let num = 0;\r\n            for (let i of result.locations) {\r\n              if (i.status == 1) num++;\r\n            }\r\n            this.avail_book_number = num;\r\n            setTimeout(() => {\r\n              var key = 0;\r\n              for (let i of result.locations) {\r\n                that.locationData.push({\r\n                  key: key,\r\n                  status: i.status,\r\n                  room_number: i.room_number,\r\n                  book_shelf: i.book_shelf,\r\n                  side: i.side,\r\n                  layer: i.layer,\r\n                });\r\n                key++;\r\n              }\r\n              that.loading = false;\r\n            }, 200);\r\n          }\r\n        })\r\n        .catch((error) => console.log(\"error\", error));\r\n    },\r\n  },\r\n  created() {\r\n    this.id = this.getBookISBN();\r\n    // console.log(this.id);\r\n\r\n    this.getBookInfo();\r\n    this.getBookLocations();\r\n  },\r\n};\r\n</script>\r\n\r\n<style>\r\np {\r\n  word-wrap: break-word;\r\n}\r\n</style>","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./BookDetail.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./BookDetail.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./BookDetail.vue?vue&type=template&id=45b4a6af&\"\nimport script from \"./BookDetail.vue?vue&type=script&lang=js&\"\nexport * from \"./BookDetail.vue?vue&type=script&lang=js&\"\nimport style0 from \"./BookDetail.vue?vue&type=style&index=0&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--7-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--7-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--7-oneOf-1-2!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./BookDetail.vue?vue&type=style&index=0&lang=css&\""],"sourceRoot":""}
(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d0ac592"],{"18c8":function(e,t,n){"use strict";n.r(t);var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[[n("a-table",{attrs:{dataSource:e.reservationList,rowKey:function(e){return e.reservation_id},loading:e.loading}},[n("a-table-column",{attrs:{title:"book name","data-index":"book_name"}}),n("a-table-column",{attrs:{title:"ISBN","data-index":"ISBN"}}),n("a-table-column",{attrs:{title:"reservation time","data-index":"reservation_time"}}),n("a-table-column",{attrs:{title:"status","data-index":"status"},scopedSlots:e._u([{key:"default",fn:function(t,a){return[0==a.status?n("a-tag",{attrs:{color:"green"}},[e._v("ON GOING")]):1==a.status?n("a-tag",{attrs:{color:"red"}},[e._v("CANCELLED")]):e._e()]}}])}),n("a-table-column",{attrs:{title:"Action"},scopedSlots:e._u([{key:"default",fn:function(t,a){return[n("a-tooltip",{staticClass:"item",attrs:{effect:"dark",size:"small",content:"详情",placement:"top"}},[n("a-button",{attrs:{type:"primary",icon:"el-icon-edit"},on:{click:function(t){return e.routeToDetail(a.reservation_id)}}},[e._v("reservation detail")])],1)]}}])})],1)]],2)},r=[],o=n("1da1"),i=(n("96cf"),n("d3b7"),n("3ca3"),n("ddb0"),n("93d6")),s={data:function(){return{access_token:"",reservationList:[],loading:!0}},created:function(){this.getReservation()},methods:{getReservation:function(){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function t(){var n,a,r,o,s,c,u,l,d,p,f;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return n=e,a=new Headers,a.append("Content-Type","application/json"),a.append("token",Object(i["c"])()),r={method:"GET",headers:a},o=new Request(e.$global.BASE_URL+"/api/reservation",r),t.next=8,fetch(o).then((function(e){return e.json()})).then((function(e){console.log("reservation",e),s=e.data})).catch((function(e){return console.log("Request Failed",e)}));case 8:c=regeneratorRuntime.mark((function t(n){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return s[n].reservation_time=s[n].reservation_time.substring(0,10),l=new Headers,l.append("Content-Type","application/json"),l.append("token",Object(i["c"])()),d={method:"GET",headers:l},p=e.$global.BASE_URL+"/api/admin/book/detail?ISBN="+s[n].ISBN,f=new Request(p,d),t.next=9,fetch(f).then((function(e){return e.json()})).then((function(e){s[n].book_name=e.data[0].bookName}));case 9:case"end":return t.stop()}}),t)})),u=0;case 10:if(!(u<s.length)){t.next=15;break}return t.delegateYield(c(u),"t0",12);case 12:u++,t.next=10;break;case 15:n.reservationList=s,console.log("reservationList",e.reservationList),e.loading=!1;case 18:case"end":return t.stop()}}),t)})))()},routeToDetail:function(e){this.$router.push({path:"/user/reservation/"+e,params:{id:e}})}}},c=s,u=n("2877"),l=Object(u["a"])(c,a,r,!1,null,null,null);t["default"]=l.exports}}]);
//# sourceMappingURL=chunk-2d0ac592.08a0818a.js.map
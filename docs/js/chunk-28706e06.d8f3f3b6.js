(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-28706e06","chunk-e3f21598"],{"18c8":function(t,e,r){"use strict";r.r(e);var n=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",[[r("a-table",{attrs:{dataSource:t.reservationList,rowKey:function(t){return t.reservation_id},loading:t.loading,pagination:t.pagination}},[r("a-table-column",{attrs:{align:"center",title:"BOOK NAME","data-index":"book_name"}}),r("a-table-column",{attrs:{align:"center",title:"ISBN","data-index":"ISBN"}}),r("a-table-column",{attrs:{align:"center",title:"RESERVATION TIME","data-index":"reservation_time"}}),r("a-table-column",{attrs:{align:"center",title:"STATUS","data-index":"status"},scopedSlots:t._u([{key:"default",fn:function(e,n){return[0==n.status?r("a-tag",{attrs:{color:"green"}},[t._v("ON GOING")]):1==n.status?r("a-tag",{attrs:{color:"red"}},[t._v("CANCELLED")]):2==n.status?r("a-tag",{attrs:{color:"blue"}},[t._v("FINISHED")]):t._e()]}}])}),r("a-table-column",{attrs:{align:"center",title:"ACTION"},scopedSlots:t._u([{key:"default",fn:function(e,n){return[r("a-button",{attrs:{type:"primary",icon:"el-icon-edit"},on:{click:function(e){return t.routeToDetail(n.reservation_id)}}},[t._v("RESERVATION DETAIL")])]}}])})],1)]],2)},a=[],o=r("1da1"),i=(r("96cf"),r("a9e3"),r("d3b7"),r("3ca3"),r("ddb0"),r("93d6")),s={name:"reservation",props:{size:{default:10,type:Number}},data:function(){return{access_token:"",reservationList:[],loading:!0,pagination:{}}},created:function(){this.getReservation(),this.pagination.pageSize=this.size},methods:{getReservation:function(){var t=this;return Object(o["a"])(regeneratorRuntime.mark((function e(){var r,n,a,o,s,l,u,c,d,f,p;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return r=t,n=new Headers,n.append("Content-Type","application/json"),n.append("token",Object(i["c"])()),a={method:"GET",headers:n},o=new Request(t.$global.BASE_URL+"/api/reservation",a),e.next=8,fetch(o).then((function(t){return t.json()})).then((function(t){console.log("reservation",t),s=t.data})).catch((function(t){return console.log("Request Failed",t)}));case 8:l=regeneratorRuntime.mark((function e(r){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return s[r].reservation_time=s[r].reservation_time.substring(0,10),c=new Headers,c.append("Content-Type","application/json"),c.append("token",Object(i["c"])()),d={method:"GET",headers:c},f=t.$global.BASE_URL+"/api/admin/book/detail?ISBN="+s[r].ISBN,p=new Request(f,d),e.next=9,fetch(p).then((function(t){return t.json()})).then((function(t){s[r].book_name=t.data[0].bookName}));case 9:case"end":return e.stop()}}),e)})),u=0;case 10:if(!(u<s.length)){e.next=15;break}return e.delegateYield(l(u),"t0",12);case 12:u++,e.next=10;break;case 15:r.reservationList=s,console.log("reservationList",t.reservationList),t.loading=!1;case 18:case"end":return e.stop()}}),e)})))()},routeToDetail:function(t){this.$router.push({path:"/user/reservation/"+t,params:{id:t}})}}},l=s,u=r("2877"),c=Object(u["a"])(l,n,a,!1,null,null,null);e["default"]=c.exports},"408a":function(t,e,r){var n=r("e330");t.exports=n(1..valueOf)},5899:function(t,e){t.exports="\t\n\v\f\r                　\u2028\u2029\ufeff"},"58a8":function(t,e,r){var n=r("e330"),a=r("1d80"),o=r("577e"),i=r("5899"),s=n("".replace),l="["+i+"]",u=RegExp("^"+l+l+"*"),c=RegExp(l+l+"*$"),d=function(t){return function(e){var r=o(a(e));return 1&t&&(r=s(r,u,"")),2&t&&(r=s(r,c,"")),r}};t.exports={start:d(1),end:d(2),trim:d(3)}},"6cb8":function(t,e,r){"use strict";r.r(e);var n=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",[r("a-row",[r("a-card",{attrs:{bordered:!1}},[r("a-space",[r("a-avatar",{attrs:{src:t.userInfo.avatar,size:64}}),r("a-space",{attrs:{direction:"vertical"}},[r("div",{staticStyle:{"font-size":"20px",color:"black"}},[t._v("Hello, "+t._s(t.userInfo.name)+". Today is "+t._s(t.getDateString())+".")]),r("div",[t._v("ID: "),r("router-link",{attrs:{to:"/user"}},[t._v(t._s(t.userInfo.id))])],1)])],1)],1)],1),r("a-row",{staticStyle:{height:"120px"},attrs:{gutter:[48,16]}},[r("a-col",{attrs:{span:8}},[r("a-card",{attrs:{title:t.borrowingTitle,loading:t.loading,bordered:!1}},[r("router-link",{attrs:{slot:"extra",to:"/user/borrowing"},slot:"extra"},[t._v("MORE INFO"),r("a-icon",{attrs:{type:"right"}})],1),r("a-statistic",{staticClass:"demo-class",attrs:{value:t.borrowing,suffix:"books","value-style":{color:"#348619"}},scopedSlots:t._u([{key:"prefix",fn:function(){return[r("a-icon",{attrs:{type:"book"}})]},proxy:!0}])})],1)],1),r("a-col",{attrs:{span:8}},[r("a-card",{attrs:{title:t.lastReturnedBookTitle,loading:t.loading,bordered:!1,bodyStyle:"font-size: 15px"}},[r("router-link",{attrs:{slot:"extra",to:"/user/borrowing/history"},slot:"extra"},[t._v("MORE INFO"),r("a-icon",{attrs:{type:"right"}})],1),""===t.lastReturnedBook?r("div",[t._v(" You did not return a book recently. ")]):r("div",[t._v(" You recently returned "),r("router-link",{staticStyle:{"font-style":"italic"},attrs:{to:"/book/"+t.lastReturnedBook}},[t._v(t._s(t.lastReturnedBookName))]),t._v(". ")],1)],1)],1),r("a-col",{attrs:{span:8}},[r("a-card",{attrs:{title:t.fineAmountTotalTitle,loading:t.loading,bordered:!1,bodyStyle:"font-size: 15px"}},[r("router-link",{attrs:{slot:"extra",to:"/user/fine/history"},slot:"extra"},[t._v("MORE INFO"),r("a-icon",{attrs:{type:"right"}})],1),r("a-statistic",{staticClass:"demo-class",attrs:{value:t.fineAmount,suffix:"$","value-style":{color:"#cf1322"}},scopedSlots:t._u([{key:"prefix",fn:function(){return[r("a-icon",{attrs:{type:"money-collect"}})]},proxy:!0}])})],1)],1)],1),r("a-row",[r("a-card",{attrs:{title:t.reserveStatusTitle,loading:t.loading,bordered:!1,bodyStyle:"font-size: 15px"}},[r("router-link",{attrs:{slot:"extra",to:"/user/borrowing"},slot:"extra"},[t._v("MORE INFO"),r("a-icon",{attrs:{type:"right"}})],1),r("reservation",{attrs:{size:5}})],1)],1),r("a-row",[r("a-card",{attrs:{title:t.borrowingsTitle,loading:t.loading,bordered:!1,bodyStyle:"font-size: 15px"}},[r("router-link",{attrs:{slot:"extra",to:"/user/borrowing"},slot:"extra"},[t._v("MORE INFO"),r("a-icon",{attrs:{type:"right"}})],1),r("borrowing",{attrs:{size:5}})],1)],1)],1)},a=[],o=(r("d3b7"),r("18c8")),i=r("2c56"),s=r("93d6"),l={components:{Reservation:o["default"],Borrowing:i["default"]},data:function(){return{loading:!0,borrowingTitle:"CURRENTLY BORROWING",borrowingsTitle:"CURRENTLY BORROWING",lastReturnedBookTitle:"LAST RETURNED BOOK",fineAmountTotalTitle:"TOTAL FINE",reserveStatusTitle:"YOUR RESERVATIONS",borrowing:2,lastReturnedBook:"9787111461340",lastReturnedBookName:"云计算",fineAmount:100,userInfo:{},isAdmin:""}},methods:{getDateString:function(){var t=new Date;return t.toDateString()}},created:function(){this.isAdmin=Object(s["e"])(),this.userInfo=Object(s["d"])();var t=new Headers({"Content-Type":"application/json"});t.append("token",Object(s["c"])());var e={method:"GET",headers:t},r=this;fetch("".concat(this.$global.BASE_URL,"/api/dashboard"),e).then((function(t){return t.json()})).then((function(t){var e=t.code,n=t.data,a=t.msg;r.loading=!1,0==e?(r.borrowing=null==n.borrowing?0:n.borrowing,r.fineAmount=null==n.fine_amount?0:n.fine_amount,r.lastReturnedBook=null==n.last_returned_book?"":n.last_returned_book,r.lastReturnedBookName=null==n.last_returned_book_name?"":n.last_returned_book_name):r.$message.error(a)})).catch((function(t){r.$message.error("API call failed")}))}},u=l,c=r("2877"),d=Object(c["a"])(u,n,a,!1,null,"9433eecc",null);e["default"]=d.exports},7156:function(t,e,r){var n=r("1626"),a=r("861d"),o=r("d2bb");t.exports=function(t,e,r){var i,s;return o&&n(i=e.constructor)&&i!==r&&a(s=i.prototype)&&s!==r.prototype&&o(t,s),t}},a9e3:function(t,e,r){"use strict";var n=r("83ab"),a=r("da84"),o=r("e330"),i=r("94ca"),s=r("6eeb"),l=r("1a2d"),u=r("7156"),c=r("3a9b"),d=r("d9b5"),f=r("c04e"),p=r("d039"),g=r("241c").f,b=r("06cf").f,v=r("9bf2").f,_=r("408a"),m=r("58a8").trim,h="Number",k=a[h],y=k.prototype,N=a.TypeError,R=o("".slice),I=o("".charCodeAt),E=function(t){var e=f(t,"number");return"bigint"==typeof e?e:T(e)},T=function(t){var e,r,n,a,o,i,s,l,u=f(t,"number");if(d(u))throw N("Cannot convert a Symbol value to a number");if("string"==typeof u&&u.length>2)if(u=m(u),e=I(u,0),43===e||45===e){if(r=I(u,2),88===r||120===r)return NaN}else if(48===e){switch(I(u,1)){case 66:case 98:n=2,a=49;break;case 79:case 111:n=8,a=55;break;default:return+u}for(o=R(u,2),i=o.length,s=0;s<i;s++)if(l=I(o,s),l<48||l>a)return NaN;return parseInt(o,n)}return+u};if(i(h,!k(" 0o1")||!k("0b1")||k("+0x1"))){for(var x,w=function(t){var e=arguments.length<1?0:k(E(t)),r=this;return c(y,r)&&p((function(){_(r)}))?u(Object(e),r,w):e},S=n?g(k):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,isFinite,isInteger,isNaN,isSafeInteger,parseFloat,parseInt,fromString,range".split(","),O=0;S.length>O;O++)l(k,x=S[O])&&!l(w,x)&&v(w,x,b(k,x));w.prototype=y,y.constructor=w,s(a,h,w)}}}]);
//# sourceMappingURL=chunk-28706e06.d8f3f3b6.js.map
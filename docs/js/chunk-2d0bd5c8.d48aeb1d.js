(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d0bd5c8"],{"2c56":function(t,e,o){"use strict";o.r(e);var n=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",[o("a-table",{attrs:{"data-source":t.borrowingList,rowKey:function(t){return t.borrowing_id}}},[o("a-table-column",{attrs:{title:"ISBN","data-index":"ISBN"}}),o("a-table-column",{attrs:{title:"borrow_date","data-index":"borrow_date"}}),o("a-table-column",{attrs:{title:"due_date","data-index":"due_date"}}),o("a-table-column",{attrs:{title:"Action"},scopedSlots:t._u([{key:"default",fn:function(e,n){return[o("a-tooltip",{staticClass:"item",attrs:{effect:"dark",size:"small",content:"详情",placement:"top"}},[o("a-button",{attrs:{type:"primary",icon:"el-icon-edit"},on:{click:function(e){return t.routeToDetail(n.borrowing_id)}}},[t._v(" 详情 ")])],1),o("a-tooltip",{staticClass:"item",attrs:{effect:"dark",size:"small",content:"归还",placement:"top"}},[o("a-button",{attrs:{type:"primary",icon:"el-icon-edit"},on:{click:function(e){return t.returnBook(n.borrowing_id)}}},[t._v(" 归还 ")])],1),o("a-tooltip",{staticClass:"item",attrs:{effect:"dark",size:"small",content:"续借",placement:"top"}},[o("a-button",{attrs:{type:"primary",icon:"el-icon-edit"},on:{click:function(e){return t.renewBook(n.borrowing_id)}}},[t._v("续借")])],1)]}}])})],1)],1)},r=[],a=(o("d3b7"),{data:function(){return{access_token:"",borrowingList:[]}},created:function(){this.getBorrowing()},methods:{getBorrowing:function(){var t=this,e=new Headers;e.append("access_token",this.access_token);var o={method:"GET",headers:e},n=new Request("https://www.fastmock.site/mock/54449dce8948f02a106d0f454713f04b/spm/api/usr/borrowing",o);fetch(n).then((function(t){return t.json()})).then((function(e){t.borrowingList=e.borrowings,console.log(e)})).catch((function(t){return console.log("Request Failed",t)}))},routeToDetail:function(t){this.$router.push({path:"/user/borrowing/"+t+"/detail",params:{id:t}})},returnBook:function(t){var e=this.$createElement;console.log(t);var o=new Headers;o.append("access_token",this.access_token);var n={method:"POST",body:t,headers:o},r=new Request("https://www.fastmock.site/mock/54449dce8948f02a106d0f454713f04b/spm/api/borrowing/return",n);fetch(r).then((function(t){return t.json()})).then((function(t){console.log(t),0==t.error_code&&e("a-alert",{attrs:{message:"Success Text",type:"success"}})})).catch((function(t){return console.log("Request Failed",t)}))},renewBook:function(t){console.log(t);var e=new Headers;e.append("access_token",this.access_token);var o={method:"POST",body:t,headers:e},n=new Request("https://www.fastmock.site/mock/54449dce8948f02a106d0f454713f04b/spm/api/borrowing/renew",o);fetch(n).then((function(t){return t.json()})).then((function(t){console.log(t)})).catch((function(t){return console.log("Request Failed",t)}))}}}),s=a,c=o("2877"),i=Object(c["a"])(s,n,r,!1,null,null,null);e["default"]=i.exports}}]);
//# sourceMappingURL=chunk-2d0bd5c8.d48aeb1d.js.map